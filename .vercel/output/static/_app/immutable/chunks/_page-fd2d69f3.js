import{g as p}from"./getSupabase-c3da5325.js";import"./index-aef88a00.js";import{r as g}from"./index-1a234430.js";import"./index-7bccd38b.js";import"./Indicator.svelte_svelte_type_style_lang-3c3a1caf.js";const w=async a=>{const{session:r,supabaseClient:i}=await p(a);if(!r)throw g(302,"/login");let u=Date.now(),l=new Date;l.setHours(19,0,0,0);let n=(l-u)/1e3,e=Math.floor(n/3600);e=e<10?"0"+e:e;let t=Math.floor(n%3600/60);t=t<10?"0"+t:t;let s=Math.floor(n%3600%60);s=s<10?"0"+s:s;let m={hoursLeft:e,minutesLeft:t,secondsLeft:s};const{data:c,count:f}=await i.from("questions").select("*",{count:"exact"}),{data:d}=await i.from("questions").select("*").eq("id",a.params.slug).single(),{data:o}=await i.from("user_answers").select("id, answer").eq("user_id",r.user.id).eq("question_id",a.params.slug).single();return{user:r.user,examData:d,questions:c,questionsCount:f,answer:o,userAnswer:o==null?void 0:o.answer,timer:m}},M=Object.freeze(Object.defineProperty({__proto__:null,load:w},Symbol.toStringTag,{value:"Module"}));export{M as _,w as l};
